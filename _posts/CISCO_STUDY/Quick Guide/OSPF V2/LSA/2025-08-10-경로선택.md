---
layout: post
title: "경로선택"
date: 2025-08-10
categories:
  - "CISCO_STUDY/Quick Guide/OSPF V2/LSA"
tags:
---


# 경로선택

## 📘 OSPF Area 구조 복습 (전제 이해)

OSPF는 **계층형 라우팅 프로토콜**이야.

즉:

- 모든 **Area는 반드시 Area 0(Backbone)**과 연결되어야 함.
- **Area 간 통신은 기본적으로 Area 0을 통해서만 가능**.
- 이 구조를 기준으로 경로 우선순위를 계산함.

---

## 🥇 1순위: **Area 0을 경유하는 경로가 가장 우선**

> ❗ "Area 0을 통해 도달할 수 있다면, 무조건 그것을 선택"
> 

### ✅ 이유:

- OSPF는 **다른 Area 간 통신은 반드시 Area 0을 거쳐야 한다**는 규칙을 갖고 있어.
- 즉, Area 0을 통한 경로는 **정상적이고, 신뢰도 높은 경로**로 간주됨.
- ABR들이 요약해서 준 정보가 **Area 0을 통해 연결된다고 판단되면 그걸 먼저 선택**함.

### 🔍 예시:

```
css
복사편집
[Area 1] --- [ABR1] --- Area 0 --- [ABR2] --- [Area 2]

```

- Area 1에서 Area 2로 가려면 → Area 0을 통해 우회하는 게 정석
- 다른 경로가 있어도 Area 0을 통과하는 경로가 **있다면 그게 우선**

---

## 🥈 2순위: **Area 내부 경로보다, 다른 Area 경유가 더 짧으면 다른 Area 경로 선택**

> ❗ "ABR가 요약해서 준 경로의 metric이 더 낮다면, Area 내부에서 우회하지 않고 다른 Area 경유"
> 

### ✅ 이유:

- OSPF는 **Shortest Path First (SPF)** 알고리즘 기반이기 때문에,
    
    → **비용(metric)이 낮은 경로**를 우선 선택함.
    
- 만약 같은 목적지를 찾기 위해:
    - 자신의 Area 안에서 가려면 50
    - 다른 Area를 통해 가면 30이라면
        
        → 다른 Area를 통해 가는 걸 선택함
        

### 📌 중요한 조건:

- 이 경우에도 **Area 0을 통해서만 다른 Area로 가는 게 원칙**
    
    → 즉, "다른 Area 경유"는 항상 **Area 0을 통해서 우회**한다는 전제가 있음
    

---

## 🥉 3순위: **Area 내부 목적지는 Area 0을 거치지 않고 직접 가는 경로 우선**

> ❗ "같은 Area 안의 목적지는, Area 0 경유하지 않고 내부 경로로 바로 가는 게 우선"
> 

### ✅ 이유:

- Area 내부 라우팅은 **자체적으로 SPF 계산해서 가장 빠른 경로**를 찾음
- 내부 목적지를 Area 0까지 우회해서 가는 건 **의미도 없고 비효율적**이야
- ABR가 summary LSA로 외부 Area 경로를 줄 때, **자기 Area 목적지는 요약 안 해 줌**

---

## ✅ 정리 표

| 우선순위 | 경로 유형 | 설명 |
| --- | --- | --- |
| 🥇 1순위 | Area 0을 경유하는 경로 | Area 간 통신은 반드시 Area 0 → 가장 신뢰 |
| 🥈 2순위 | 다른 Area를 통한 경로 (metric 더 낮음) | 같은 목적지라도 비용 낮으면 다른 Area 경유함 |
| 🥉 3순위 | 같은 Area 내부 경로 | 내부 목적지는 내부 경로로 직통 우선 |

---

## 📌 실전 예제 (요약)

```
mathematica
복사편집
[Area 1]
  |
R1 -- R2 -- ABR1 -- Area 0 -- ABR2 -- R6 -- R7
                          |
                        Area 2

```

- R1에서 R7로 가야 함
    - Area 1 내부 경로: R1 → R2 → ABR1 → Area 0 → ABR2 → R6 → R7 (비용: 30)
    - R1이 R7까지 Area 1 내부 우회: 불가능 (타 Area 목적지)
    - 다른 ABR이 요약한 경로 중 비용이 더 낮으면 그걸 선택

---

## 💬 결론 요약

> OSPF는 기본적으로 "계층형 + SPF 알고리즘"이 핵심.
> 
> 
> 그래서 항상:
> 
> 1. **Area 0이 경유되면 가장 우선**
> 2. **metric이 더 낮은 경로라면 다른 Area라도 선택**
> 3. **같은 Area 목적지는 내부 경로로 가는 게 원칙**

---

궁금하면 이걸 실습 토폴로지나 `show ip ospf database`, `show ip route` 결과로도 예시 줄 수 있어!

이 규칙은 OSPF 트러블슈팅 시 아주 중요하게 작용해! 💪