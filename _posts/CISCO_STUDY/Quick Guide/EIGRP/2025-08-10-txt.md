---
layout: post
title: "txt"
date: 2025-08-10
categories:
  - "CISCO_STUDY/Quick Guide/EIGRP"
tags:
---



# txt

rip(md5 암호원리 다풀려서 안씀) 사양추세

eigrp(hybrid routing protocol)(combines aspects of both distance-vector and link-state protocols)
시스코에서 2013에 표준화 개방 2017년쯤부터 거의다들어감

ospfv2(제일많이쓰임)

eigrp
Router(config)#router eigrp <1-65535>  Autonomous system number
같은 라우팅 정책을 적용(공유) -> 다른 eigrp와 겹치면안됨
hop count 255
hop count는 보통 isp 10대 & 해외여도 보통 30대
변화가 생겼을때만 partial update(부분업데이트)

advanced distance vector / hybrid routing protocol
서브넷과 vlsm,cidr지원
인증방식 md5(원리뚫림)/sha256 지원
dual 알고리즘

unequal cost load balance & equal cost load balance 지원
unequal cost load balance의 핵심은 variance

1.hello packet(주기적 전송)
2.neighbor 관계성립
3.topology table 주고받음
4.dual알고리즘을 통해 가장좋은경로선택
5.가장좋은경로를 라우팅테이블에 보냄

1hello(eigrp, ospf)메시지란--------------------------
eigrp 선언순간 포트에 전부 hello를 보냄+(주기적)
eigrp -(hello)> rip(x),static(x)
eigrp -(hello)> ospf,eigrp(o)
eigrp <(hello)- ospf,eigrp(o) 2neighbor관계성립
2.neighbor관계성립
3.EIGRP (Update)Advertisement Packet = 서로아는 모든경로정보(topology table, 갈수있는건 전부)를 주고받음------------------

- 변경 사항이 발생했을 때에만 트리거 방식으로 보냄
포함정보 : 목적지 네트워크, 거리 정보 (Reported Distance), Delay, Bandwidth, Load 등 메트릭 요소, Route Tag (외부 경로인지 등 표시)
4.dual 알고리즘(topology table에서 제일좋은거)으로 제일좋은경로 선택
5.가장좋은경로를 라우팅테이블에 보냄

!!!!경로 끊어진경우 update(advertisement 토폴로지테이블)로 끊어진거 알림, ack로 답변, 답변받고나서 query를 보냄!!!!!!
ack는 update query reply에 대한 응답

eigrp
neighbor,topology table, routing table 3개의테이블(트러블슈팅때 보는순서도)

hello interval(주기적 메시지 보내는시간) x 3 =  hold down time(neighbor 유지 시간,hello못받으면 neighbor 삭제)

| 종류 | 설명 |
| --- | --- |
| **Hello** | Neighbor 관계 형성 및 유지 |
| **Update (Advertisement)** | 라우팅 정보 전달 (Topology Table 구성용) |
| **Query** | 경로 손실 시 대체 경로 질의 |
| **Reply** | Query에 대한 응답 |
| **ACK** | Update/Query/Reply 패킷에 대한 확인 응답 (Hello는 ACK 불필요) |

간단 흐름 요약
Hello Packet 교환
→ Neighbor Table 형성

Update Packet 전송
→ Topology Table 구성

DUAL 알고리즘 실행
→ Successor/Feasible Successor 결정 → Routing Table 갱신

---

router-id
eigrp processor id 식별 => 경로업데이트가 동일한라우터를 통해 반복되지 않으려고
router-id 정해지는 순서
1 loopback (설정되어있을시)
2 인터페이스중 가장 높은 ip주소 사용
3 eigrp router-id 1.1.1.1(직접설정)

---

eigrp dual 알고리즘
bandwidth cost값을 계산
metric(hop이 아닌 bandwidth로 계산)이 작은걸 선택

1 cost계산하여 successor, feasible successor선택 (fast convergence)
show ip route D옵션 (eigrp successor)
2

---

eigrp topology
fd 경로전부
rd nexthop부터

feasible successor 선출
반드시 rd는 fd보다  낮아야함

쿼리보낸후 기다리는상태 active (fd = -1)

eigrp
network a.b.c.d 0.0.0.0(와일드카드마스크 = 서브넷반대 255.255.255.255)
네트워크 범위를 좁혀 쿼리범위를 줄여 부하를 줄임

passive interface, no auto-summary,

passive-interface + no passive-interface [interface]

show (fd, metric) [ad,metric()]

address-family ipv4 unicast autonomous-system 7

---

equal cost load balance

| 라우팅 프로토콜 | Equal Cost Load Balancing 지원 여부 |
| --- | --- |
| **RIP** | 지원 |
| **EIGRP** | 지원 + 비슷한 비용도 지원 (`variance`) |
| **OSPF** | 지원 |
| **Static Routing** | 지원 (`ip route ...` 여러 개 등록 가능) |

```
TCP 순서 꼬임, 메트릭 차이 있으면 불가

```

| 주의사항 | 설명 |
| --- | --- |
| 메트릭이 같아야 함 | 비용이 다르면 ECMP 불가 (→ EIGRP는 `variance`로 해결 가능) |
| Per-packet은 순서 보장 안 됨 | TCP/스트리밍 트래픽에선 지연이나 꼬임 발생할 수 있음 |
| 일부 장비는 해시값으로 결정 | 항상 균등하게 나눠지진 않음 (특히 짧은 트래픽 흐름) |

1 만약에 succcessor가 삭제되었다는 query를 날리면 받은 장비들은 해당장비의 경로는 무조건 삭제한다
왜냐하면 그 장비를 통한 베스트경로였기때문에 해당장비를 통한 successor경로 자체가 무조건 변하게 되어있음

2 리플라이를 받을때 대상의 토폴로지테이블의 정보에서 자신부터 대상까지의 경로가 있으므로 metric을 더해줘서 갱신함
ex) a의 토폴테이블 via c fd3 rd1을 b에게 알려주면 b의 토폴로지테이블에 via c fd 3+(a->b metric) rd 1+(a->b metric)

3 query의 reply를 전부 받지못하면 active상태는 유지된다! query에 대한 응답을 못받아서(successor가 미정이라X)

4 Feasible succcessor로 전환해도 다른라우터에 query를 안보냄, update는 보냄

1. eigrp에서 Feasible succcessor로 전환하면 토폴로지테이블엔 Feasible succcessor가 successor로 변경되나? Feasible succcessor도 다시계산하나?
✅ Feasible Successor(FS)는 장애 발생 시 Successor로 승격되며, Topology Table에서도 그 상태가 바뀝니다.
✅ 그리고 그 순간, 새로운 Feasible Successor 후보들도 즉시 재평가됩니다.

router eigrp BASIC-EIGRP-LAB으로 그룹을 만들어
address-family ipv4 unicast autonomous-system 7,8,9등 다르게 넣어 원하는대로 네트워크별로 묶어서 멀티캐스트? 관리?

클래식eigrp는 키체인 md5
명명된 eigrp sha256 지원(아마 명명된거로 sha256 키를 쓰나봄)

network 10.10.10.0 0.0.0.255
R1(config)#do show ip ro eigrp | b Gateway
Gateway of last resort is not set

```
  2.0.0.0/24 is subnetted, 1 subnets

```

D        2.2.2.0 [90/2848] via 203.230.7.2, 00:19:16, GigabitEthernet0/0
3.0.0.0/24 is subnetted, 1 subnets
D        3.3.3.0 [90/2848] via 203.230.9.2, 00:19:16, GigabitEthernet0/1
10.0.0.0/24 is subnetted, 1 subnets -> 이줄은 어쨋든 ip클래스 따라 들어감
D        10.10.10.0 [90/2848] via 203.230.9.2, 00:00:04, GigabitEthernet0/1
D     203.230.8.0/24 [90/3072] via 203.230.9.2, 00:24:31, GigabitEthernet0/1
[90/3072] via 203.230.7.2, 00:24:31, GigabitEthernet0/0

| 항목 | 최대 개수 | 설명 |
| --- | --- | --- |
| **Successor** | **최대 16개** | 실제로 트래픽을 분산하여 사용하는 경로 (라우팅 테이블에 등록됨) |
| **Feasible Successor (FS)** | **이론상 무제한** | 예비 경로로만 유지, 라우팅 테이블엔 미등록 (Topology Table에만 존재) |

g0/0이 15360
g0/1이 10880

만약에 15360이 제일 낮은숫자면
g0/0외로 가야하는, 갈수없는경로까지 모든 라우터의 경로를 먹어버리는거아닌가?
or
라우팅테이블에서 갈수있는 경로만?
토폴로지테이블에서 모든 경로 다?

🔍 `default-information originate`는 "내가 가진 디폴트 경로를 다른 라우터들에게 라우팅 프로토콜을 통해 전파하겠다"는 뜻

## ✅ 다시 정리: 두 개념의 범용적 차이

| 항목 | 디폴트 경로 (default route) | default-information originate |
| --- | --- | --- |
| 📌 정의 | 알 수 없는 목적지 트래픽을 어디로 보낼지 지정 | 그 디폴트 경로를 다른 라우터에게 **공유** |
| 📍 동작 범위 | **라우터 내부에서만** 동작 | **라우팅 프로토콜에 따라** 전파 |
| 🎯 목적 | 본인이 목적지를 모를 때 사용하는 경로 | 다른 라우터들이 모를 때 쓸 수 있도록 알려주는 역할 |
| 🧠 효과 | 라우팅 테이블에 직접 경로가 생김 | 다른 장비에 디폴트 경로가 생기게 함 |
| 🧩 사용 조건 | 단독 사용 가능 | 전파할 디폴트 경로가 이미 설정되어 있어야 함 |
| 🔄 적용 가능 프로토콜 | Static, Dynamic 무관 | **RIP, OSPF, EIGRP 등 다 적용 가능** |
|  |  |  |

디폴트경로를 줄때 0.0.0.0으로 주는데 이거말곤 특별한 표시가없는데 그럼 다른 라우팅테이블의 경로들이랑 겹칠거같은데 0.0.0.0은 알아서 우선순위를 좀 낮춰주나? 잘못하면 전부 0.0.0.0으로 처리되는거아닌가?

# ✅ 전체 경로 선택 순서 (포괄 정리)

| 우선순위 | 기준 | 설명 |
| --- | --- | --- |
| ① | **Longest Prefix Match** | 가장 구체적인 목적지 경로 선택 (`/24` > `/16` > `/0`) |
| ② | **Administrative Distance (AD)** | 경로의 **신뢰도**, 낮을수록 우선 |
| ③ | **Metric** | **같은 라우팅 프로토콜 내**에서 가장 짧은 거리 |
| ④ | **Equal-cost load balancing 여부** | 같은 Prefix, AD, Metric이면 → **라우터가 둘 다 사용 (로드 밸런싱)** |
| ⑤ | **라우팅 프로토콜 특성** | 프로토콜마다 처리 방식/특성이 다름 (ex. OSPF E1/E2, BGP local-pref 등) |
| ⑥ | **Route filtering 정책** | ACL, distribute-list 등으로 특정 경로 제외 가능 |
| ⑦ | **Manual route preference (PBR 등)** | Policy-Based Routing으로 경로 강제 지정 가능 |
| ⑧ | **Forwarding table에 설치되는 경로 수 제한** | FIB(Table CEF) 제한 설정 시 일부 경로 제외 |
| ⑨ | **Route Tagging, Route Map, Weight (BGP)** | 특정 경로 우선 선택 위해 수동으로 값 설정 가능 |
| ⑩ | **Interface 상태** | 목적지 인터페이스가 down이면 해당 경로 무시됨 |

- 123
    
    123222
    
    12312354