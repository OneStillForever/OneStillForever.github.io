---
layout: post
title: "라우팅테이블에서 경로선택 우선순위"
date: 2025-08-10
categories:
  - "CISCO_STUDY/Quick Guide/라우팅"
tags:
---




# 라우팅테이블에서 경로선택 우선순위

# ✅ ① 실습 시나리오: 경로 선택 과정 시각화

## 🎯 목표: `192.168.10.0/24`로 가는 경로가 여러 개 있을 때 어떤 경로를 선택하는지 보기

---

### 📘 [상황 A] – 서로 다른 prefix length

```
plaintext
복사편집
R1 라우팅 테이블:
S    192.168.0.0/16 [1/0] via 10.1.1.1
S    192.168.10.0/24 [1/0] via 10.1.1.2

```

- 목적지: `192.168.10.5`

🔍 선택된 경로: `192.168.10.0/24` (더 구체적이므로 무조건 선택)

✔ **결론**: prefix가 제일 먼저 비교된다.

---

### 📗 [상황 B] – Prefix 길이는 같고 AD만 다름

```
plaintext
복사편집
R1 라우팅 테이블:
R    192.168.10.0/24 [120/1] via 10.1.1.1      ← RIP
O    192.168.10.0/24 [110/20] via 10.1.1.2     ← OSPF

```

- 목적지: `192.168.10.5`

🔍 선택된 경로: OSPF 경로 (AD 110 < 120)

✔ **결론**: prefix 동일할 경우 AD 비교

---

### 📙 [상황 C] – Prefix와 AD도 동일, Metric만 다름

```
plaintext
복사편집
R1 라우팅 테이블:
O    192.168.10.0/24 [110/10] via 10.1.1.1
O    192.168.10.0/24 [110/20] via 10.1.1.2

```

🔍 선택된 경로: 10.1.1.1 (Cost=10)

✔ **결론**: AD도 같으면 Metric 비교

---

### 📕 [상황 D] – Prefix, AD, Metric 모두 같음

```
plaintext
복사편집
R1 라우팅 테이블:
O    192.168.10.0/24 [110/10] via 10.1.1.1
O    192.168.10.0/24 [110/10] via 10.1.1.2

```

🔍 결과: 둘 다 설치됨 → **ECMP (Equal Cost Multi Path)**

→ 트래픽을 라운드로빈 등으로 분산

---

# ✅ ② 역질문 케이스: "Metric이 낮은데 왜 안 쓰이죠?"

---

## ❗ 케이스 1: **Prefix가 덜 구체적임**

```
plaintext
복사편집
R    192.168.0.0/16 [120/1] via 10.1.1.1
S    192.168.10.0/24 [1/0] via 10.1.1.2

```

- RIP metric: 1 → Static metric: 0
- 근데 RIP은 /16이고, Static은 /24

🔍 선택된 경로: **Static (/24)**

✔ Metric이 아무리 낮아도 **prefix가 구체적인 게 우선**

---

## ❗ 케이스 2: **AD가 낮은 경로가 있음**

```
plaintext
복사편집
R    192.168.10.0/24 [120/1] via 10.1.1.1
S    192.168.10.0/24 [1/5] via 10.1.1.2

```

- RIP metric: 1 (좋음)
- Static metric: 5 (더 높음)
- AD: Static 1 < RIP 120

🔍 선택된 경로: **Static**

✔ AD가 우선이고, Metric은 **같은 프로토콜 내에서만 비교**

---

## ❗ 케이스 3: **Metric이 낮지만 필터링됨**

```
plaintext
복사편집
O    192.168.10.0/24 [110/10] via 10.1.1.1
O    192.168.10.0/24 [110/5] via 10.1.1.2 (→ distribute-list로 deny됨)

```

- Metric은 10.1.1.2가 더 낮지만
- 해당 경로는 필터링되어 라우팅 테이블에 안 들어감

🔍 선택된 경로: **10.1.1.1**

✔ 필터링되면 아예 후보에서 탈락

---

## ❗ 케이스 4: **인터페이스 down**

```
plaintext
복사편집
ip route 0.0.0.0 0.0.0.0 FastEthernet0/1

```

- Metric/AD 다 좋아도 인터페이스가 down이면 **경로 자체 제거**

🔍 `show ip route`에서 사라짐

---

# ✅ 보너스: BGP는 순서 자체가 다름!

| BGP 우선순위 (일부 발췌) | 설명 |
| --- | --- |
| 1. Weight | 수동으로 설정 가능 (Cisco 전용) |
| 2. Local Preference | 내부 우선도 |
| 3. AS Path 길이 | 짧을수록 우선 |
| 4. Origin Type | IGP > EGP > Unknown |
| 5. MED | 낮을수록 우선 |

→ BGP에서는 **Metric보다 Weight/Local-pref**가 훨씬 중요함

---

# 🧠 한 줄 요약

> "Metric은 같은 프로토콜 내에서만 우선순위를 결정한다."
> 
> 
> 그 이전엔 **Prefix → AD**가 무조건 먼저 고려되고,
> 
> 필터링, PBR, 인터페이스 상태 등도 경로를 차단할 수 있다.
> 

---

필요하면 위 케이스들을 **Packet Tracer 실습 구성도 만들어 드릴 수 있어요.**

특정 라우팅 프로토콜 하나를 집중적으로 실습하고 싶다면 말씀 주세요!