---
layout: post
title: "TIP"
date: 2025-08-10
categories: [CISCO_STUDY]
tags:
---

# TIP

Cyber123#

Description달아주기 주석과 같다

arp프로토콜이 경로를 학습할때 돌아오는길도 알아야하므로 request단계에서도 테이블이 갱신된다 그래서 반드시 필요한경로만 딱 학습되는건 아님

dhcp가 한번 할당해주면  무선라우터에서 멋대로 바꾼다고 엔드디바이스에서 갱신이 되지않음 엔드디바이스가 다시받아와야함

이메일서버도메인 =  웹서버도메인
이메일서버       =/=  웹서버

혹시 dns에서 포트별로 처리할수있는지

best effort ip 패킷

프로토콜이뭔지 포트가 어떤건지알고 세션을 연결해 포트를열고 통신

포트는 겹쳐서 쓸수있음
ex)필수포트인 80같은 포트를 서비스에 해당해놓으면 해당포트를 막을수없는 꼼수

세그멘테이션
ack
큐잉 버퍼링

프로토콜
암호화쪽은 대부분 프로토콜이 세부버전까지 맞춰줘야함

packet l3 ip 라우팅테이블 /l3시큐리티 ip주소로 막는것
frame l2 mac /mac테이블(300초후 초기화) / l2시큐리티 mac주소로 막는것

tcp s(source)rc port TCP출발포트는 데이터를 보내는 쪽, 즉 클라이언트에서 사용하는 임시 포트 번호 보안요소x

네트워크 구성할때 arp사이즈를 줄이는것이 중요함 최적화
nslookup

엔드디바이스에도 arp테이블이 있다 그래서 테이블이 갱신된후 디바이스에서 mac주소를 포함한채로 전송할수있는것(+재전송)

라우팅테이블은 이더넷은 mac주소로만 통신 

목적지가 다른 대역대의 네트워크라면 목적지는 처음목적지는 라우터(게이트웨이)를 찾는것부터

무선네트워크

1. 무선라우터와 디바이스의 ssid동일
2. wep(wep key),wpa-psk(psk pass phrase),wpa2-psk <<<< wpa1,2(id,pass)
wpa personal, enterprise
3. id pass는 서버(aaa서버로 id,pass 인증)
4. 무선라우터에서 aaa서버로 id pass를 전송해 맞는지 확인하고 인증결과를 돌려줌
5.디바이스의 ip랑 식별번호를 서버에서 구분하는 방식
5. 무선인증서버의 aes암호화(입력받은 id pass를 전송할때의 보안)
aaa서버의 로그인시도할수있는권한

장비설정의 초기설정은 무조건 no

항상 라우팅테이블이 생성된 후 arp테이블 생성 

osi1~3 하드웨어설정후 -> 4~7서비스(어플)

ipv4의 클래스 공인ip 사설ip 서브넷(and계산후 같으면 같은네트워크)
(프로젝트할때 항상 ip에 서브넷마스크까지 꼭써줄것)

라우터는 모르는경로의 패킷이 들어오면 버려짐

isp - nat - 사설ip대역

라우터에는 큐가 있어서 패킷을 저장해 다른 패킷이 완료된후 전송할수있음

!!패킷트레이서에서는 그 과정이 제대로 출력안될수있음!!

tcp의 3handshake가 완료되는시점은 pc→server→pc→완료시점→server

즉 전송하는시점에서 완료되기때문에 서버까지 도달하지않아도 그다음단계의 프로토콜이 시작됨

스위치의 포트마다 mac주소가 다름

이메일서버도메인 =  웹서버도메인
이메일서버       =/=  웹서버

혹시 dns에서 포트별로 처리할수있는지

포트별로는처리안됨

## 그럼 도메인은 같고 서버는 다르게 구성하려면?

### 예:

- `example.com` → 웹 서버 (IP: 192.0.2.10)
- `example.com` → 메일 서버 (IP: 192.0.2.20)

이 경우 DNS에서 **다른 레코드를 추가**해야 합니다:

서버에서 무선라우터로 핑을 못보냄(방화벽원인)

네트워크 장비의 룰을 제조사가 커스텀할수있음

ex)auto-mdix 다이렉트,크로스오버케이블

cisco rfc 문서

이더넷케이블cat

광케이블의 모듈 GBIC

single(직선) multi(반사되어 지그재그)mode

네트워크는 항상 이중화

active+stanby → active+active

보통 3~5년마다이직

토폴로지

RING형

csma/cd

!회선공유를 하지않는다!

캐리어센싱 : 회선의 사용을 확인 탐색

jam시그널 캐리어센싱이 겹치는걸방지

주파수오토스케일링 : 주파수의 혼선을 파악해서 주파수를 구성

collision domain : 충돌을 기준으로 영역

collision domain 해결한것 → 스위치

공채에서 특채로

스위치

1 mac주소를기반으로 통신하는장비

2 collision domain을 나누는 장비

라우터

1 ip주소를 기반으로 통신하는장비

2 broadcast domain을 나누는장비

lan가상화

IPV6 CIDR SLAAC

2계층

스위치의 램 맥테이블

맥주소 학습 저장하는시간 aging time 300초

프레이밍 흐름제어 오류제어

통신할때 (세그멘테이션)쪼깨는 데이터 사이즈 mtu 1504byte

pc→서버 경로가 다양할때 경로마다 속도가 다르므로 도착순서가 다를수있음

시퀀스넘버로 데이터를 조립

3계층

라우팅프로토콜

네트워크에서 주로쓰는 프로토콜

ip arp rarp(reverse arp ex dhcp)

4계층

라우터의 경로를 정하는건 [라우팅프로토콜]

데이터이름 세그먼트

5계층

세션

7계층

[SNMP]

TCPIP

방화벽gui asdm

cli의 2960lanbase[k9] k9은 보안 없으면 보안없다는거

사용자모드 특권모드 설정모드에 대해

콘솔패스워드와 enable 패스워드가 따로있음

reload에서 질문

system configuration has been modified save? yes no

의 의미는 nvram에있는걸 불러오겠냐는 말임 

yes를 해버리면 기존설정을 불러오기때문에 만약 초기화하고싶으면 

erase한후 no해야함

라우터0이 목적지가 아닌건 명확 프로토콜이 icmp이고 request reply로 이뤄져있기때문

동일 네트워크 대역:
ARP는 !!!동일한 네트워크 대역 내!!!에서만 동작합니다. 즉, 다른 네트워크로 데이터를 전송하기 위해서는 라우터를 거쳐야 하며, 이때는 ARP 대신 라우팅 프로토콜이 사용됩니다.

라우터의 arp프로토콜이 진행되는 조건은 라우팅테이블에 ip가있어야함

l3에서는 ip routing을 해줘야함

| 영어 설명 표현 | 설정 형태 | Cisco 명령 예 |
| --- | --- | --- |
| **"next hop route"** | 다음 라우터의 IP 주소 입력 | `ip route 192.168.1.0 255.255.255.0 10.0.0.2` |
| **"directly connected route"** | 나의 포트(인터페이스) 지정 | `ip route 192.168.1.0 255.255.255.0 Serial0/0/0` |
| **"directly connected host route"** | 목적지 IP까지 직접 연결된 인터페이스 | `ip route 192.168.1.10 255.255.255.255 G0/1` |
| **"next hop host route"** | 단일 IP를 next hop으로 지정 | `ip route 192.168.1.10 255.255.255.255 10.0.0.2` |

# 설명용

enable
사용자모드 특권모드 설정모드
찾아볼것

interface [인터페이스명]
line이랑 비교하면서 설명해주기

line console 0
router (config-line(console))#

line vty 0 4
router (config-line(ssh,telnet))#

console뒷편, vty 원격접속
line console 0, vty

router(config)# username [aa] password [bb] 로컬에서 설정해준거임
password [비번] + login

config-line(console, vty)
router(config-line)# login local, login

password [암호] 해당 line 접속 시 입력할 비밀번호 설정
login	비밀번호 사용 활성화

![image.png](TIP%2021ef22352173804b91d4d6f10a230a4e/d8a3164c-225e-4e15-b71a-74fc2ee41700.png)

패킷이 라우터를 거칠때 라우터 ip로 바뀜

항상 네트워크장비는 단일연결이 안되도록 구현

ipv6 rip 구성할때 distributed connected 남발하지말것

포트에 rip구성할때 가능하면 통일해서 

ip router rip ripname으로 한줄로

vmnet bridged(연결인터페이스 직접지정)

extconn 연결안될땐 구름 재시작

ssh와 aaa인증이 같이설정되어있으면 접속할때

ssh로 연결을 한 후 라우터의 접근을 위한 aaa인증을 하게됨

## 장비 보통 10년

bridged는 자동으로 네트워크를 찾아서 지정을못한다!!

무조건 vm network editor에서 NIC를 지정해서 vmnet에 설정해주자!!

라우터의 subint trunk는 show int [g0]

제일아래쪽

네트워크가 같을때는 x자리본모양으로 교차연결하고 다를때는 ㅁ자로 연결해도 루핑이 생기지 않으니 기본적으론 이건가?

### ChatGPT의 말:

✅ 네! 매우 중요한 관점을 잘 짚으셨어요.

질문 내용을 풀어보면 이런 의미로 이해됩니다:

---

> "같은 네트워크(VLAN 또는 브로드캐스트 도메인) 안에 있는 스위치들은 X자 교차로 연결해야 이중화가 잘 되고, 다른 네트워크일 경우엔 ㅁ자처럼만 연결해도 루프가 생기지 않으니 STP가 덜 필요하지 않나?"
> 

---

## 🎯 결론부터 말씀드리면:

- **맞습니다.**
    - **같은 VLAN/브로드캐스트 도메인**이라면 루프 방지를 위해 STP가 꼭 필요하고,
        
        → 그래서 **X자 구조가 더 이중화에 강하고 안전한 선택**이 됩니다.
        
    - *서로 다른 네트워크(VLAN 분리)**라면 **Layer 2 브로드캐스트 루프가 생기지 않으므로**,
        
        → ㅁ자 구조든 뭐든 STP에 크게 의존하지 않아도 됩니다.